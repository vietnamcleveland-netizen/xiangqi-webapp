<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Chinese Chess (Xiangqi)</title>
  <style>
    :root {
      --cell: 60px;
      --board-w: calc(var(--cell) * 9);  /* 540 */
      --board-h: calc(var(--cell) * 10); /* 600 */
    }
    * { box-sizing: border-box; margin: 0; padding: 0; }
    body { background:#f4f4f4; font-family: Arial, sans-serif; color:#222; text-align:center; }
    h1 { color:#b22222; margin-top: 16px; }
    #turn { margin:6px 0 12px; color:#666; font-size:14px; }

    #board {
      position: relative;
      width: var(--board-w);
      height: var(--board-h);
      margin: 0 auto 40px;
      background: #f3c78b;
      border: 3px solid #6b3b16;
      border-radius: 6px;
      box-shadow: 0 4px 10px rgba(0,0,0,.1);
      overflow: hidden;
    }

    /* Lưới/đồ hoạ */
    svg { position:absolute; inset:0; width:100%; height:100%; z-index:1; pointer-events:none; }
    line { stroke:#5e3416; stroke-width:2; }
    rect#river { fill:#e4aa5f; }
    text { fill:#5c3717; font-size:28px; font-weight:700; }

    /* Quân cờ */
    .piece{
      position:absolute; width:50px; height:50px; border-radius:50%;
      display:flex; align-items:center; justify-content:center;
      font-weight:bold; font-size:22px; background:#fff; cursor:pointer;
      z-index:5; user-select:none;
      transform: translate(-50%, -50%); /* đặt tâm vào toạ độ giao điểm */
    }
    .red   { color:#d32f2f; border:3px solid #d32f2f; }
    .black { color:#000;    border:3px solid #000; }

    /* viền chọn */
    .hl{ position:absolute; width:50px;height:50px; border:3px solid #ffd54f;
         border-radius:8px; pointer-events:none; z-index:4; transform: translate(-50%,-50%);
         box-shadow:0 0 8px rgba(0,0,0,.3) inset; }
  </style>
</head>
<body>
  <h1>Chinese Chess (Xiangqi)</h1>
  <div id="turn">Red to move</div>

  <div id="board">
    <svg viewBox="0 0 540 600">
      <!-- viền -->
      <rect x="5" y="5" width="530" height="590" fill="none" stroke="#5e3416" stroke-width="4"/>

      <!-- ngang -->
      <g>
        <line x1="5" y1="5"   x2="535" y2="5"/>
        <line x1="5" y1="65"  x2="535" y2="65"/>
        <line x1="5" y1="125" x2="535" y2="125"/>
        <line x1="5" y1="185" x2="535" y2="185"/>
        <line x1="5" y1="245" x2="535" y2="245"/>
        <line x1="5" y1="305" x2="535" y2="305"/>
        <line x1="5" y1="365" x2="535" y2="365"/>
        <line x1="5" y1="425" x2="535" y2="425"/>
        <line x1="5" y1="485" x2="535" y2="485"/>
        <line x1="5" y1="545" x2="535" y2="545"/>
        <line x1="5" y1="595" x2="535" y2="595"/>
      </g>

      <!-- dọc (ngắt ở sông) -->
      <g>
        <line x1="5"   y1="5"   x2="5"   y2="595"/>
        <line x1="65"  y1="5"   x2="65"  y2="245"/><line x1="65"  y1="305" x2="65"  y2="595"/>
        <line x1="125" y1="5"   x2="125" y2="245"/><line x1="125" y1="305" x2="125" y2="595"/>
        <line x1="185" y1="5"   x2="185" y2="245"/><line x1="185" y1="305" x2="185" y2="595"/>
        <line x1="245" y1="5"   x2="245" y2="245"/><line x1="245" y1="305" x2="245" y2="595"/>
        <line x1="305" y1="5"   x2="305" y2="245"/><line x1="305" y1="305" x2="305" y2="595"/>
        <line x1="365" y1="5"   x2="365" y2="245"/><line x1="365" y1="305" x2="365" y2="595"/>
        <line x1="425" y1="5"   x2="425" y2="245"/><line x1="425" y1="305" x2="425" y2="595"/>
        <line x1="485" y1="5"   x2="485" y2="245"/><line x1="485" y1="305" x2="485" y2="595"/>
        <line x1="535" y1="5"   x2="535" y2="595"/>
      </g>

      <!-- sông -->
      <rect id="river" x="5" y="245" width="530" height="60"/>
      <text x="200" y="285">楚河</text>
      <text x="320" y="285">漢界</text>

      <!-- Cung tướng: dùng clipPath để không bị “dư” -->
      <defs>
        <clipPath id="pal-top"><rect x="185" y="5" width="120" height="120"/></clipPath>
        <clipPath id="pal-bot"><rect x="185" y="475" width="120" height="120"/></clipPath>
      </defs>
      <g clip-path="url(#pal-top)">
        <line x1="185" y1="5"   x2="305" y2="125"/>
        <line x1="305" y1="5"   x2="185" y2="125"/>
      </g>
      <g clip-path="url(#pal-bot)">
        <line x1="185" y1="475" x2="305" y2="595"/>
        <line x1="305" y1="475" x2="185" y2="595"/>
      </g>
    </svg>
  </div>

  <script src="/app.js" defer></script>
</body>
</html>
